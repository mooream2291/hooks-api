{"ast":null,"code":"var _jsxFileName = \"/Users/ashleymoore/Documents/codefellows/code401/lab-31/hooks-api/src/components/todo/todo-connected.js\";\nimport React, { useEffect, useState } from 'react';\nimport TodoForm from './form.js';\nimport TodoList from './list.js';\nimport './todo.scss';\nimport useAjax from './hooks/ajax.js';\nconst todoAPI = 'https://api-js401.herokuapp.com/api/v1/todo';\n\nconst ToDo = () => {\n  const [list, setList] = useState([]); // const [count, setCount] = useState();\n\n  const _getTodoItems = () => {\n    const options = {\n      method: 'get',\n      url: todoAPI\n    };\n    const data = useAjax(options);\n    setList(data); //may need curlies\n  }; //when this component mounts it calls this get todo list function\n\n\n  useEffect(_getTodoItems, []); // this is allowing two thigns to happen simultaneously. \n\n  const _addItem = item => {\n    const options = {\n      // item.due = new Date(),\n      // fetch(todoAPI, {\n      method: 'post',\n      url: todoAPI,\n      data: item // mode: 'cors'\n      // cache: 'no-cache',\n      // headers: { 'Content-Type': 'application/json' },\n      // body: JSON.stringify(item)\n\n    };\n    useAjax(options); // .then(response => response.json())\n    // .then(savedItem => {\n    // setList([...list, savedItem])\n    // })\n    // .catch(console.error);\n  };\n\n  const _toggleComplete = id => {\n    let item = list.filter(i => i._id === id)[0] || {};\n    const options = {\n      method: 'put',\n      url: `${todoAPI}/${id}`,\n      data: {\n        complete: !item.complete\n      }\n    };\n    const data = useAjax(options);\n    setList(data); //may need curlies\n  }; // let item = list.filter(i => i._id === id)[0] || {};\n  // if (item._id) {\n  //   item.complete = !item.complete;\n  //   let url = `${todoAPI}/${id}`;\n  //   fetch(url, {\n  //     method: 'put',\n  //     mode: 'cors',\n  //     cache: 'no-cache',\n  //     headers: { 'Content-Type': 'application/json' },\n  //     body: JSON.stringify(item)\n  //   })\n  //     .then(response => response.json())\n  //     .then(savedItem => {\n  //       setList(list.map(listItem => listItem._id === item._id ? savedItem : listItem));\n  //     })\n  //     .catch(console.error);\n  // };\n\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"header\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, \"There are \", list.filter(item => !item.complete).length, \" Items To Complete\")), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"todo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TodoForm, {\n    handleSubmit: _addItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TodoList, {\n    list: list,\n    handleComplete: _toggleComplete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }))));\n};\n\nexport default ToDo;","map":{"version":3,"sources":["/Users/ashleymoore/Documents/codefellows/code401/lab-31/hooks-api/src/components/todo/todo-connected.js"],"names":["React","useEffect","useState","TodoForm","TodoList","useAjax","todoAPI","ToDo","list","setList","_getTodoItems","options","method","url","data","_addItem","item","_toggleComplete","id","filter","i","_id","complete","length"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,QAAP,MAAqB,WAArB;AAEA,OAAO,aAAP;AACA,OAAOC,OAAP,MAAoB,iBAApB;AAEA,MAAMC,OAAO,GAAG,6CAAhB;;AAGA,MAAMC,IAAI,GAAG,MAAM;AAEjB,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBP,QAAQ,CAAC,EAAD,CAAhC,CAFiB,CAGjB;;AAEA,QAAMQ,aAAa,GAAG,MAAM;AAC1B,UAAMC,OAAO,GAAG;AACZC,MAAAA,MAAM,EAAE,KADI;AAEZC,MAAAA,GAAG,EAAEP;AAFO,KAAhB;AAIE,UAAMQ,IAAI,GAAGT,OAAO,CAACM,OAAD,CAApB;AACAF,IAAAA,OAAO,CAACK,IAAD,CAAP,CANwB,CAMV;AACjB,GAPD,CALiB,CAanB;;;AACEb,EAAAA,SAAS,CAACS,aAAD,EAAgB,EAAhB,CAAT,CAdiB,CAca;;AAE9B,QAAMK,QAAQ,GAAIC,IAAD,IAAU;AACzB,UAAML,OAAO,GAAG;AAChB;AACA;AACEC,MAAAA,MAAM,EAAE,MAHM;AAIdC,MAAAA,GAAG,EAAEP,OAJS;AAKdQ,MAAAA,IAAI,EAAEE,IALQ,CAMd;AACA;AACA;AACA;;AATc,KAAhB;AAWAX,IAAAA,OAAO,CAACM,OAAD,CAAP,CAZyB,CAavB;AACA;AACE;AACF;AACA;AACH,GAlBD;;AAoBA,QAAMM,eAAe,GAAGC,EAAE,IAAI;AAC5B,QAAIF,IAAI,GAAGR,IAAI,CAACW,MAAL,CAAYC,CAAC,IAAIA,CAAC,CAACC,GAAF,KAAUH,EAA3B,EAA+B,CAA/B,KAAqC,EAAhD;AACA,UAAMP,OAAO,GAAG;AACdC,MAAAA,MAAM,EAAE,KADM;AAEdC,MAAAA,GAAG,EAAG,GAAEP,OAAQ,IAAGY,EAAG,EAFR;AAGdJ,MAAAA,IAAI,EAAE;AAAEQ,QAAAA,QAAQ,EAAE,CAACN,IAAI,CAACM;AAAlB;AAHQ,KAAhB;AAKA,UAAMR,IAAI,GAAGT,OAAO,CAACM,OAAD,CAApB;AACAF,IAAAA,OAAO,CAACK,IAAD,CAAP,CAR4B,CAQd;AACjB,GATC,CApCiB,CA+Cf;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACF;;;AAEA,sBACE,uDACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACaN,IAAI,CAACW,MAAL,CAAYH,IAAI,IAAI,CAACA,IAAI,CAACM,QAA1B,EAAoCC,MADjD,uBADF,CADF,eAMI;AAAS,IAAA,SAAS,EAAC,MAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAU,IAAA,YAAY,EAAER,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AACE,IAAA,IAAI,EAAEP,IADR;AAEE,IAAA,cAAc,EAAES,eAFlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CALF,CANJ,CADF;AAqBD,CA1FD;;AA4FA,eAAeV,IAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport TodoForm from './form.js';\nimport TodoList from './list.js';\n\nimport './todo.scss';\nimport useAjax from './hooks/ajax.js';\n\nconst todoAPI = 'https://api-js401.herokuapp.com/api/v1/todo';\n\n\nconst ToDo = () => {\n\n  const [list, setList] = useState([]);\n  // const [count, setCount] = useState();\n\n  const _getTodoItems = () => {\n    const options = { \n        method: 'get',\n        url: todoAPI,    \n      }\n      const data = useAjax(options);\n      setList(data);//may need curlies\n  };\n//when this component mounts it calls this get todo list function\n  useEffect(_getTodoItems, []); // this is allowing two thigns to happen simultaneously. \n\n  const _addItem = (item) => {\n    const options = { \n    // item.due = new Date(),\n    // fetch(todoAPI, {\n      method: 'post',\n      url: todoAPI,\n      data: item,\n      // mode: 'cors'\n      // cache: 'no-cache',\n      // headers: { 'Content-Type': 'application/json' },\n      // body: JSON.stringify(item)\n    }\n    useAjax(options);\n      // .then(response => response.json())\n      // .then(savedItem => {\n        // setList([...list, savedItem])\n      // })\n      // .catch(console.error);\n  };\n\n  const _toggleComplete = id => {\n    let item = list.filter(i => i._id === id)[0] || {};\n    const options = { \n      method: 'put',\n      url: `${todoAPI}/${id}`, \n      data: { complete: !item.complete },\n    }\n    const data = useAjax(options);\n    setList(data);//may need curlies\n};\n\n    // let item = list.filter(i => i._id === id)[0] || {};\n\n    // if (item._id) {\n\n    //   item.complete = !item.complete;\n\n    //   let url = `${todoAPI}/${id}`;\n\n    //   fetch(url, {\n    //     method: 'put',\n    //     mode: 'cors',\n    //     cache: 'no-cache',\n    //     headers: { 'Content-Type': 'application/json' },\n    //     body: JSON.stringify(item)\n    //   })\n    //     .then(response => response.json())\n    //     .then(savedItem => {\n    //       setList(list.map(listItem => listItem._id === item._id ? savedItem : listItem));\n    //     })\n    //     .catch(console.error);\n  // };\n\n  return (\n    <>\n      <header>\n        <h2>\n          There are {list.filter(item => !item.complete).length} Items To Complete\n        </h2>\n      </header>\n        <section className=\"todo\">\n          <div>\n            <TodoForm handleSubmit={_addItem} />\n          </div>\n\n          <div>\n            <TodoList\n              list={list}\n              handleComplete={_toggleComplete}\n            />\n          </div>\n        </section>\n    </>\n  );\n};\n\nexport default ToDo;"]},"metadata":{},"sourceType":"module"}